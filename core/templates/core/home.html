{% extends 'base.html' %}
{% load static i18n %}

{% block title %}{% trans "Home - Gila Electric" %}{% endblock %}

{% block extra_head %}
<link rel="stylesheet" href="{% static 'core/css/home.css' %}">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">
{% endblock %}

{% block content %}
{% load i18n %}
<div class="home-container">

  <!-- ðŸ  Hero Section with Categories + Carousel -->
  <section class="container-mt-4">
    <div class="row">

      <!-- ðŸ“š Categories Sidebar -->
      <div class="col-md-3">
        <div class="category-sidebar">
          <ul class="list-unstyled" id="sidebar-categories">
            <li>{% trans "Loading categories..." %}</li>
          </ul>
        </div>
      </div>

      <!-- ðŸŽ¡ Carousel -->
      <div class="col-md-9">
        <div id="homeCarousel" class="carousel slide" data-bs-ride="carousel">
          <div class="carousel-inner">
            <div class="carousel-item active">
              <img src="{% static 'core/img/1.jpg' %}" class="d-block w-100" alt="Banner 1">
            </div>
            <div class="carousel-item">
              <img src="{% static 'core/img/2.png' %}" class="d-block w-100" alt="Banner 2">
            </div>
          </div>
          <button class="carousel-control-prev" type="button" data-bs-target="#homeCarousel" data-bs-slide="prev">
            <span class="carousel-control-prev-icon"></span>
          </button>
          <button class="carousel-control-next" type="button" data-bs-target="#homeCarousel" data-bs-slide="next">
            <span class="carousel-control-next-icon"></span>
          </button>
        </div>
      </div>
    </div>
  </section>

  <!-- âš¡ Flash Sales -->
  <section class="container mt-5 flash-sales-section">

    <!-- ðŸŸ¥ First Row: Todayâ€™s Box -->
    <div class="d-flex align-items-center mb-2">
      <div class="today-square"></div>
      <span class="today-text ms-2">{% trans "Todayâ€™s" %}</span>
    </div>

    <!-- Second Row: Title + Timer + Arrows -->
    <div class="flash-timer d-flex align-items-center gap-5">
      <!-- Left: Flash Sales Title -->
      <h3 class="section-title m-0">{% trans "Flash Sales" %}</h3>

      <!-- Countdown Timer -->
      <div class="flash-timer d-flex align-items-center gap-3">
        <!-- Days -->
        <div class="timer-unit text-center">
          <div class="timer-label">{% trans "Days" %}</div>
          <div class="timer-value" id="days">03</div>
        </div>

        <div class="timer-separator">:</div>

        <!-- Hours -->
        <div class="timer-unit text-center">
          <div class="timer-label">{% trans "Hours" %}</div>
          <div class="timer-value" id="hours">12</div>
        </div>

        <div class="timer-separator">:</div>

        <!-- Minutes -->
        <div class="timer-unit text-center">
          <div class="timer-label">{% trans "Minutes" %}</div>
          <div class="timer-value" id="minutes">45</div>
        </div>

        <div class="timer-separator">:</div>

        <!-- Seconds -->
        <div class="timer-unit text-center">
          <div class="timer-label">{% trans "Seconds" %}</div>
          <div class="timer-value" id="seconds">22</div>
        </div>
      </div>


      <!-- Right: Carousel Arrows -->
      <div class="d-flex align-items-center gap-2 ms-auto">
        <button class="btn btn-light border" id="flash-prev">
          <i class="bi bi-chevron-left"></i>
        </button>
        <button class="btn btn-light border" id="flash-next">
          <i class="bi bi-chevron-right"></i>
        </button>
      </div>
    </div>

      <!-- ðŸ›’ Flash Sales Slider -->
      <div class="flash-carousel-wrapper position-relative overflow-hidden">
        <div class="flash-carousel d-flex transition" id="flash-sales-container">
        </div>
      </div>

      <!-- âž¡ï¸ View All Products Button -->
      <div class="d-flex justify-content-center mt-4">
        <a href="{% url 'all_products' %}" class="btn btn-primary px-4 py-2">
          {% trans "View All Products" %}
        </a>
      </div>

      <!-- â¬‡ï¸ Section Divider -->
      <hr class="mt-4 mb-5">
    </div>


  </section>

  <!-- ðŸ§© Categories Grid Section -->
  <section class="container mt-5">
    <h3 class="mb-4 section-title">{% trans "Shop by Category" %}</h3>
    <div class="row text-center" id="grid-categories">
      <p>{% trans "Loading categories..." %}</p>
    </div>
  </section>

  <!-- ðŸ† Best Selling -->
  <section class="container mt-5">
    <h3 class="mb-4 section-title">{% trans "Best Selling" %}</h3>
    <div class="row">
      {% for product in best_selling %}
      <div class="col-6 col-md-3 mb-4">
        <div class="card h-100">
          <img src="{{ product.image.url }}" class="card-img-top" alt="{{ product.name }}">
          <div class="card-body">
            <h6>{{ product.name }}</h6>
            <p class="fw-bold">${{ product.price }}</p>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>
  </section>

  <!-- ðŸ§­ Explore Our Products -->
  <section class="container mt-5 mb-5">
    <h3 class="mb-4 section-title">{% trans "Explore Our Products" %}</h3>
    <div class="row">
      {% for product in explore %}
      <div class="col-6 col-md-3 mb-4">
        <div class="card h-100">
          <img src="{{ product.image.url }}" class="card-img-top" alt="{{ product.name }}">
          <div class="card-body">
            <h6>{{ product.name }}</h6>
            <p>${{ product.price }}</p>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>
  </section>

</div>
{% endblock %}

{% block extra_scripts %}
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="{% static 'core/js/home.js' %}"></script>
{% endblock %}
